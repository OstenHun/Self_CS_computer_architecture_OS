<aside>

- 교착 상태
- 식사하는 철학자 문제
- 자원 할당 그래프
- 교착 상태 발생 조건
</aside>

## 교착 상태

- 두 개 이상의 프로세스가 각자 가지고 있는 자원을 기다려 어떠한 프로세스도 더이상 진행할 수 없는 상태
- 일어나지 않을 사건을 기다리며 진행이 멈춰 버리는 현상.

## 식사하는 철학자 문제

### 시나리오

1. 계속 생각 하다가 왼쪽 포크가 사용 가능하면 집어든다
2. 계속 생각 하다가 오른쪽 포크가 사용 가능하면 집어든다
3. 왼쪽, 오른쪽 포크를 모두 집어들면 정해진 시간동안 식사를 한다.
4. 식사 시간이 끝나면 오른쪽 포크를 내려놓는다.
5. 오른쪽 포크를 내려놓은 뒤 왼쪽 포크를 내려놓는다.
6. 다시 1번부터 반복한다.

⇒ 모든 철학자가 동시에 포크를 집어 식사를 하면 어떤 철학자도 식사를 할 수 없음. 

→ 다른 철학자가 포크를 내려놓을 때까지 기다린다.

⇒ **교착 상태(Deadlock)** : 일어나지 않을 사건을 기다리며 진행이 멈춰 버리는 현상

⇒ 철학자 : 프로세스 or 스레드 / 포크 : 자원  / 생각하는 행위 : 자원 대기 / 

포크는 한 명의 철학자만 이용 가능 : 하나의 프로세스 혹은 스레드만 자원에 접근 가능 → 임계구역.

앞에서 배운 뮤텍스 락에서도 교착 상태 발생 가능.

## 자원 할당 그래프

### 규칙

1. 프로세스는 원으로, 자원의 종류는 사각형으로 표현.
2. 사용할 수 있는 자원의 개수는 자원 사각형 내에 점으로 표현.
3. 프로세스가 어떤 자원을 할당받아 사용 중이라면 **자원에서** 프로세스를 향해 화살표를 표시
4. 프로세스가 어떤 자원을 기다리고 있다면 **프로세스에서** 자원으로 화살표를 표시.

- 교착 상태가 일어난 그래프는 원의 형태를 띄고 있다.

## 교착 상태 발생 조건

- 상호 배제
    - 한 프로세스가 사용하는 자원을 다른 프로세스가 사용할 수 없을 때 교착 상태 발생 가능.
- 점유와 대기
    - 자원을 할당받은 상태에서 다른 자원을 할당받기 기다고 있다면 교착 상태가 발생 가능.
- 비선점
    - 프로세스가 자원을 비선점 하여 교착 상태 발생
- 원형 대기
    - 프로세스들과 프로세스가 요청 및 할당받은 자원이 원의 형태를 이루어 교착 상태 발생.

## 마무리

### 키워드

- 교착 상태
    - 일어나지 않을 사건을 기다리며 무한히 대기하는 현상.
- 식사하는 철학자 문제
    - 교착 상태의 발생을 보여 주는 예시.
- 자원 할당 그래프
    - 이를 이용해 교착 상태 표현 가능.
- 교착 상태 발생 조건
    - 상호 배제, 점유와 대기, 비선점, 원형 대기.

### 확인 문제

- 식사하는 철학자 문제에서 단 한 명의 철학자가 식사를 하면 교착 상태가 발생하지 않는다.
- 상호 배제, 점유와 대기, 비선점, 원형 대기
- 2번은 식사하는 철학자 문제와 동일하며 이는 교착 상태가 발생할 위험이 있다.