<aside>

- 페이징
- 페이징 테이블
- PTBR
- TLB
</aside>

## 가상 메모리

- 실행하고자 하는 프로그램을 일부만 메모리에 적재하여 실제 물리 메모리 크기보다 더 큰 프로세스를 실행할 수 있게 하는 기술.

## 가상 메모리 관리 기법

### 페이징

- 현대 대부분의 운영체제가 사용하는 기법.
- 물리 메모리보다 큰 프로세스를 실행할 수 있다.
- 외부 단편화 문제 해결 가능.

### 세그멘테이션

## 페이징이란

### 페이지

- 프로세스의 논리 주소 공간을 자른 단위

### 프레임

- 메모리의 물리 주소 공간을 자른 단위

### 페이징

- 메모리의 물리 주소 공간을 프레임 단위로 자르고, 프로세스의 논리 주소 공간을 페이지 단위로 자른 뒤 각 페이지를 프레임에 할당하는 가상 메모리 관리 기법.

### 페이지 아웃

- 페이징 시스템에서의 스왑 아웃

### 페이지 인

- 페이징 시스템에서의 스왑 인

⇒ 프로세스를 이루는 페이지 중 실행에 필요한 일부 페이지만을 메모리에 적재하고, 당장 필요하지 않은 페이지는 보조기억장치에 남겨둘 수 있다.

### 참고) 내부 단편화

- 할당해 줬는데, 그 안에서 애매하게 남는 빈 공간.
- 프로세스가 실제로 요청한 크기보다 더 큰 블록을 할당해 줘, 그 블록 안에서 사용되지 못하고 버려지는 공간.

## 페이지 테이블

### 페이지 테이블

- 프로세스가 메모리에 불연속적으로 배치되어 다음에 실행할 명령어 위치를 찾기 어려워하는 문제를 해결하기 위해 논리 주소에 연속적으로 배치되도록 이를 사용.
- 페이지 번호 → 프레임 번호 연결.

- 페이지 테이블 베이스 레지스터 (PTBR)
    - CPU 내의 PTBR은 각 프로세스의 페이지 테이블이 적재된 주소를 가리킨다.

### TLB (Translation Lookaside Buffer)

- 페이지 테이블을 메모리에 두면, 메모리 접근 시간이 두 배로 늘어난다.
- CPU 곁에 (MMU 내에) 두는 페이지 테이블의 캐시 메모리.

- TLB 히트 : CPU가 발생한 논리 주소에 대한 페이지 번호가 TLB에 있을 경우.
- TLB 미스 : 페이지 번호가 TLB에 없을 경우, 페이지가 적재된 프레임을 알기 위해  메모리 내의 페이지 테이블에 접근할 수밖에 없는 상황.

## 페이징에서의 주소 변환

- 논리 주소 구성 → 페이지 번호, 변위
- 페이지 테이블을 통해 물리 주소 <프레임 번호, 변위> 로 변환

## 페이지 테이블 엔트리

- 페이지 테이블의 각 엔트리, 각각의 행들.

### 유효 비트

- 현재 해당 페이지에 접근 가능한지 여부를 알려주는 것
    - 페이지가 메모리에 적재되어 있다 → 유효 비트 1
    - 메모리에 적재 X → 유효 비트 0

### 보호 비트

- 페이지 보호 기능을 위해 존재하는 비트
    - 읽고 쓰기가 모두 가능한 페이지인가? → 보호 비트 1
    - 읽기만 가능한 페이지인가? → 보호 비트 0

### 참조 비트

- CPU가 이 페이지에 접근한 적이 있는지 여부를 나타냄.
    - 적재 이후 CPU가 읽거나 쓴 페이지 → 참조 비트 1
    - 적재 이후 CPU가 한 번도 읽거나 쓴 적 없는 페이지 → 참조 비트 0

### 수정 비트

- 해당 페이지에 데이터를 쓴 적 있는지 없는지 수정 여부를 알려줌.
    - ‘더티 비트’라고도 부름.
    - 변경된 적이 있는 페이지 → 수정 비트 1
    - 변경된 적 없는 페이지 → 수정 비트 0

## 페이징의 이점 - 쓰기 시 복사

## 계층적 페이징

## 마무리

### 키워드

- 페이징
- 페이지 테이블
- PTBR
- TLB

### 확인 문제

- TLB 히트의 경우 메모리 접근을 한 번으로 줄일 수 있다.
- 2번 페이지의 유효 비트가 1이므로 해당 페이지는 현재 메모리에 적재되어 있다.
- 페이지 테이블은 페이징 기법을 사용하는 컴퓨터에서 사용한다.
- TLB는 페이지 테이블의 캐시 메모리이다.